add_executable(ecab main.cpp vectorization.cpp App.cpp)
target_link_libraries(ecab PRIVATE Kokkos::kokkos Cabana::cabanacore)

if(ECAB_WERROR)
    target_compile_options(ecab PRIVATE "-Werror")
endif()
# compiler specific configurations
if(CMAKE_CXX_COMPILER_ID MATCHES GNU)
    target_compile_options(ecab PRIVATE -Wall -Wextra -Wpedantic)
    if(ECAB_LOCAL_ARCHITECTURE)
        target_compile_options(ecab PRIVATE "-march=native")
    endif()
endif()
if(CMAKE_CXX_COMPILER_ID MATCHES Clang)
    target_compile_options(ecab PRIVATE -Wall -Wextra -Wpedantic)
    if(ECAB_LOCAL_ARCHITECTURE)
        target_compile_options(ecab PRIVATE "-march=native")
    endif()
endif()
if(CMAKE_CXX_COMPILER_ID MATCHES Intel)
    if(ECAB_LOCAL_ARCHITECTURE)
        target_compile_options(ecab PRIVATE "-xHost")
    endif()
    if(ECAB_VEC_REPORT)
        #target_compile_options(ecab PRIVATE "-qopt-report-phase=vec,loop -qopt-report=5")
        target_compile_options(ecab PRIVATE -Rpass=loop-vectorize -Rpass-missed=loop-vectorize -Rpass-analysis=loop-vectorize)
    endif()
endif()
